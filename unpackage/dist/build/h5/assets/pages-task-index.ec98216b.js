import{r as e,o as a,c as l,w as s,a as t,F as u,b as r,d,e as n,t as c,f as i,i as f,g as o,S as _,h as v,v as p,n as g}from"./index-78b71ae6.js";import{o as k}from"./uni-app.es.27f7652a.js";import{g as m}from"./task.ca8b630f.js";import{_ as y}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-fetch.281d61b3.js";import"./user.ccf31787.js";const h=y({__name:"Pickup",setup(v){const p=e([]),g=e({page:0,pageSize:5,status:1}),y=e(!1),h=e(!1),b=e(!1),w=async()=>{g.value.page+=1;const e=await m(g.value);1===g.value.page&&(p.value=[]),p.value=[...p.value,...e.data.items||[]],h.value=g.value.page==e.data.pages,y.value=0===p.value.length};k((()=>{w()}));const x=()=>{h.value||w()},j=async()=>{b.value=!0,g.value.page=0,await w(),b.value=!1};return(e,v)=>{const g=f,k=o,m=_;return a(),l(m,{"refresher-triggered":b.value,onRefresherrefresh:j,"refresher-enabled":"",onScrolltolower:x,"scroll-y":"true",class:"scroll-view-wrapper","refresher-background":"#f4f4f4;"},{default:s((()=>[(a(!0),t(u,null,r(p.value,((e,t)=>(a(),l(g,{class:"card",key:t},{default:s((()=>[d(k,{"hover-class":"none",url:`/subpkg_task/detail/index?id=${e.id}`},{default:s((()=>[d(g,{class:"header"},{default:s((()=>[d(g,{class:"title"},{default:s((()=>[n("任务编号："+c(e.transportTaskId),1)])),_:2},1024),e.enablePickUp?i("",!0):(a(),l(g,{key:0,class:"tips"},{default:s((()=>[n("已延迟")])),_:1}))])),_:2},1024),d(g,{class:"content"},{default:s((()=>[d(g,{class:"content-item"},{default:s((()=>[d(g,{class:"line"},{default:s((()=>[n(c(e.startAddress),1)])),_:2},1024),d(g,{class:"line"},{default:s((()=>[n(c(e.endAddress),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"]),d(g,{class:"footer"},{default:s((()=>[d(g,{class:"time"},{default:s((()=>[d(g,null,{default:s((()=>[n("提货时间")])),_:1}),d(g,null,{default:s((()=>[n(c(e.planDepartureTime),1)])),_:2},1024)])),_:2},1024),e.enablePickUp?(a(),l(k,{key:0,class:"action",url:`/subpkg_task/pickup/index?id=${e.id}`},{default:s((()=>[n("提货")])),_:2},1032,["url"])):(a(),l(k,{key:1,class:"action disabled"},{default:s((()=>[n("提货")])),_:1}))])),_:2},1024)])),_:2},1024)))),128)),h.value?(a(),l(g,{key:0,class:"texts"},{default:s((()=>[n("已经到达底部了~")])),_:1})):i("",!0),y.value?(a(),l(g,{key:1,class:"message-blank"},{default:s((()=>[n("暂无消息")])),_:1})):i("",!0)])),_:1},8,["refresher-triggered"])}}},[["__scopeId","data-v-f09b6c92"]]),b=y({__name:"Delivery",setup(v){const p=e([]),g=e({page:0,pageSize:5,status:2}),y=e(!1),h=e(!1),b=e(!1),w=async()=>{g.value.page+=1;const e=await m(g.value);1===g.value.page&&(p.value=[]),p.value=[...p.value,...e.data.items||[]],h.value=g.value.page==e.data.pages,y.value=0===p.value.length};k((()=>{w()}));const x=()=>{h.value||w()},j=async()=>{b.value=!0,g.value.page=0,await w(),b.value=!1};return(e,v)=>{const g=f,k=o,m=_;return a(),l(m,{"refresher-triggered":b.value,onRefresherrefresh:j,"refresher-enabled":"",onScrolltolower:x,"scroll-y":"true",class:"scroll-view-wrapper","refresher-background":"#f4f4f4;"},{default:s((()=>[(a(!0),t(u,null,r(p.value,((e,t)=>(a(),l(g,{class:"card",key:t},{default:s((()=>[d(k,{"hover-class":"none",url:`/subpkg_task/detail/index?id=${e.id}`},{default:s((()=>[d(g,{class:"header"},{default:s((()=>[d(g,{class:"title"},{default:s((()=>[n("任务编号："+c(e.transportTaskId),1)])),_:2},1024)])),_:2},1024),d(g,{class:"content"},{default:s((()=>[d(g,{class:"content-item"},{default:s((()=>[d(g,{class:"line"},{default:s((()=>[n(c(e.startAddress),1)])),_:2},1024),d(g,{class:"line"},{default:s((()=>[n(c(e.endAddress),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["url"]),d(g,{class:"footer"},{default:s((()=>[d(g,{class:"time"},{default:s((()=>[d(g,null,{default:s((()=>[n("到货时间")])),_:1}),d(g,null,{default:s((()=>[n(c(e.planDepartureTime),1)])),_:2},1024)])),_:2},1024),2===e.status?(a(),l(k,{key:0,class:"action",url:`/subpkg_task/delivery/index?id=${e.id}`},{default:s((()=>[n("交付")])),_:2},1032,["url"])):i("",!0),4===e.status?(a(),l(k,{key:1,class:"action",url:`/subpkg_task/record/index?id=${e.id}`},{default:s((()=>[n("回车登记")])),_:2},1032,["url"])):i("",!0)])),_:2},1024)])),_:2},1024)))),128)),h.value?(a(),l(g,{key:0,class:"texts"},{default:s((()=>[n("已经到达底部了~")])),_:1})):i("",!0),y.value?(a(),l(g,{key:1,class:"message-blank"},{default:s((()=>[n("暂无消息")])),_:1})):i("",!0)])),_:1},8,["refresher-triggered"])}}},[["__scopeId","data-v-71f32e9d"]]),w=y({__name:"index",setup(o){const _=e(0),k=e([{title:"待提货",rendered:!0},{title:"在途",rendered:!1},{title:"已完成",rendered:!1}]);return(e,o)=>{const m=f;return a(),l(m,{class:"page-container"},{default:s((()=>[d(m,{class:"tab"},{default:s((()=>[(a(!0),t(u,null,r(k.value,((e,t)=>(a(),l(m,{onClick:e=>(e=>{k.value[e].rendered=!0,_.value=e})(t),class:"tab-item",key:t},{default:s((()=>[d(m,{class:g(["title",{active:_.value===t}])},{default:s((()=>[n(c(e.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1}),k.value[0].rendered?v((a(),l(m,{key:0,class:"message-list"},{default:s((()=>[d(h)])),_:1},512)),[[p,0===_.value]]):i("",!0),k.value[1].rendered?v((a(),l(m,{key:1,class:"message-list"},{default:s((()=>[d(b)])),_:1},512)),[[p,1===_.value]]):i("",!0),k.value[2].rendered?v((a(),l(m,{key:2,class:"message-list"},null,512)),[[p,2===_.value]]):i("",!0)])),_:1})}}},[["__scopeId","data-v-888b0b81"]]);export{w as default};
